# üìò Log de Desenvolvimento ‚Äî 2025-09-13

## 1. Estrutura do projeto
- Organizamos as pastas seguindo padr√£o **MVC** + boas pr√°ticas:
  ```
  /public      -> arquivos acess√≠veis pelo navegador (index.php, assets, uploads)
  /app
    /Controllers
    /Models
    /Views
    /Core      -> Database.php, Router.php
    /Config    -> config.php, routes.php
  /database    -> migrations, seeds, dumps
  /storage     -> relat√≥rios, logs
  /vendor      -> depend√™ncias do Composer
  .env         -> vari√°veis de ambiente
  composer.json
  ```

## 2. Banco de dados (MySQL)
- Definimos no `.env` as credenciais (`DB_HOST`, `DB_PORT`, `DB_NAME`, `DB_USER`, `DB_PASS`).
- Criamos o banco `unifio_sga` com charset `utf8mb4`.
- Estruturamos migrations para tabelas principais:
  - `users`
  - `eventos`
- Implementamos restri√ß√µes como `UNIQUE (data_evento, periodo)` para garantir que n√£o haja dois agendamentos no mesmo hor√°rio.

## 3. Configura√ß√£o do Composer
- Instalamos depend√™ncias:
  ```bash
  composer require vlucas/phpdotenv phpmailer/phpmailer dompdf/dompdf respect/validation
  ```
- Configuramos o **autoload PSR-4** no `composer.json`:
  ```json
  "autoload": {
    "psr-4": {
      "App\\": "app/",
      "Core\\": "app/Core/"
    }
  }
  ```
- Rodamos `composer dump-autoload` para atualizar o autoloader.

## 4. Bootstrap do projeto (`public/index.php`)
- Configuramos o **front controller** com:
  - `autoload.php` do Composer
  - carregamento do `.env`
  - defini√ß√£o de constantes (`ROOT_PATH`, `APP_PATH`, `VIEW_PATH`)
  - inclus√£o de `config.php`, `Router.php`
  - inicializa√ß√£o do objeto `$router`
  - carregamento de `routes.php`
  - dispatch da requisi√ß√£o

## 5. Configura√ß√µes globais (`app/Config/config.php`)
- Definimos:
  ```php
  if (!defined('APP_PATH')) define('APP_PATH', ROOT_PATH . '/app');
  if (!defined('VIEW_PATH')) define('VIEW_PATH', APP_PATH . '/Views');
  ```
- Garantimos que n√£o haja redefini√ß√£o de constantes (evitando warnings).

## 6. Router (`app/Core/Router.php`)
- Criamos um roteador simples com suporte a m√©todos `GET` e `POST`.
- Normaliza√ß√£o das rotas para evitar barras duplicadas.
- Possibilidade de usar controllers via `[Controller::class, 'metodo']`.

## 7. Rotas (`app/Config/routes.php`)
- Definimos rotas iniciais:
  - `/` ‚Üí Home (`AuthController::home`)
  - `/login`, `/register`, `/logout`
  - `/eventos` (esportivo, n√£o esportivo, cancelar)
  - `/perfil`

## 8. Controllers e Views iniciais
- Criamos `AuthController` com m√©todo `home()` carregando `home.php`.
- Criamos view `app/Views/home.php` com HTML b√°sico para testar.
- Confirmamos que o fluxo de **rotas ‚Üí controller ‚Üí view** funciona.

## 9. Debugs e Corre√ß√µes
- Corrigimos:
  - Caminho quebrado no `require` (`__DIR__.'..'` ‚Üí `dirname(__DIR__)`).
  - Erro de namespace (`app\\Controllers` ‚Üí `App\\Controllers`).
  - Problema de `$router` nulo (ordem de cria√ß√£o no `index.php`).
  - Constantes duplicadas (`APP_PATH`, `VIEW_PATH`).
- Testamos com `var_dump(file_exists(...))` e confirmamos que os arquivos estavam sendo encontrados.
- Lidamos com o erro de timeout no `composer serve`, entendendo que o ideal √© rodar direto:
  ```bash
  php -S localhost:8000 -t public
  ```

## ‚úÖ Status final
- Servidor local rodando em `http://localhost:8000`.
- Roteamento b√°sico funcionando.
- View inicial carregando.
- Estrutura s√≥lida pronta para evoluir (login, cadastro, eventos, perfil, relat√≥rios).
